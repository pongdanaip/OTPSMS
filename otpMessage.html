<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
</head>
<body>
    <style>
        input {
            width: 25px;
        }
    </style>
    <div class="fn-otp-input-section">
        <input type="text" id="OTP_1" name="OTP_1" class="fn-otp-input noto-l-bold txt-Reqkeynumber" maxlength="1" inputmode="numeric" data-index="0" autocomplete="off" data-next="OTP_2">
        <input type="text" id="OTP_2" name="OTP_2" class="fn-otp-input noto-l-bold txt-Reqkeynumber" maxlength="1" inputmode="numeric" data-index="1" autocomplete="off" data-next="OTP_3" data-previous="OTP_1" disabled>
        <input type="text" id="OTP_3" name="OTP_3" class="fn-otp-input noto-l-bold txt-Reqkeynumber" maxlength="1" inputmode="numeric" data-index="2" autocomplete="off" data-next="OTP_4" data-previous="OTP_2" disabled>
        <input type="text" id="OTP_4" name="OTP_4" class="fn-otp-input noto-l-bold txt-Reqkeynumber" maxlength="1" inputmode="numeric" data-index="3" autocomplete="off" data-next="OTP_5" data-previous="OTP_3" disabled>
        <input type="text" id="OTP_5" name="OTP_5" class="fn-otp-input noto-l-bold txt-Reqkeynumber" maxlength="1" inputmode="numeric" data-index="4" autocomplete="off" data-next="OTP_6" data-previous="OTP_4" disabled>
        <input type="text" id="OTP_6" name="OTP_6" class="fn-otp-input noto-l-bold txt-Reqkeynumber" maxlength="1" inputmode="numeric" data-index="5" autocomplete="off" data-previous="OTP_5" disabled>
    </div>
    <script>
        $(document).ready(function(){
	
  const $inp = $(".fn-otp-input");

  $inp.on({
        paste(ev) { // Handle Pasting

            const clip = ev.originalEvent.clipboardData.getData('text').trim();
            // Allow numbers only
            if (!/\d{6}/.test(clip)) return ev.preventDefault(); // Invalid. Exit here
            // Split string to Array or characters
            const s = [...clip];
            // Populate inputs. Focus last input.
            $inp.val(i => s[i]).eq(5).focus();
        },
        input(ev) { // Handle typing

            const i = $inp.index(this);
            if (this.value) $inp.eq(i + 1).focus();
        },
        keydown(ev) { // Handle Deleting

            const i = $inp.index(this);
            if (!this.value && ev.key === "Backspace" && i) $inp.eq(i - 1).focus();
        }
  });
    
  const handlePaste = function handlePaste(ev){
    $inp.on({
              paste(ev) { // Handle Pasting
                  alert("Paste work");
                  const clip = ev.originalEvent.clipboardData.getData('text').trim();
                  // Allow numbers only
                  if (!/\d{6}/.test(clip)) return ev.preventDefault(); // Invalid. Exit here
                  // Split string to Array or characters
                  const s = [...clip];
                  // Populate inputs. Focus last input.
                  $inp.val(i => s[i]).eq(5).focus();
              }
            });
  }

	$inp.on({
        change(ev) {
        	//alert("change");

          const val = ev.target.value;         
          if (!val) {
            //alert("if");
            ev.preventDefault();
            return;
          }

          // add this condition to manually trigger the paste
          // function and manually send the value to clipboard

          else if (val.trim().length == 1) {
            //alert("else if");
            ev.clipboardData = {
              getData: function getData(){
                return val.trim();
              } 
            };
            handlePaste(ev);
          } else {
            //alert("else");
            // do any other required changes
          }
        }
  });
});
    </script>
</body>
</html>
